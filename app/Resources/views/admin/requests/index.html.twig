{% extends 'admin/layout.html.twig' %}

{% block main %}
    <h1 class="page-header">
        {{ type }} заявки <span class="badge">{{ allRequestsCount }}</span>
    </h1>

    {% if allRequestsCount == 0 %}
        <div class="alert alert-success">{{ type }} заявки отсутствуют</div>
    {% else %}
        <div class="list-group">
            {% for request in requests %}
                <div class="list-group-item">
                    <h2 class="h3 entity_header">
                        {% if type == "Новые" %}
                            <form class="pull-right">
                                <button class="btn btn-link archive_link">Архивировать</button>
                            </form>
                            <span class="label label-success pull-right">Новая</span>
                        {% else %}
                            <span class="label label-default pull-right">Обработана</span>
                        {% endif %}
                        {{ request.name }}
                    </h2>

                    <div class="entity_body">
                        <h3 class="h4">Дата:
                            <small>{{ request.createdAt.format('d-m-Y') }}</small>
                        </h3>
                        <h3 class="h4">Адрес:
                            <small>{{ request.address }}</small>
                        </h3>
                        <h3 class="h4">Телефон:
                            <small>{{ request.phoneNumber }}</small>
                        </h3>
                        <h3 class="h4">Комментарий:</h3>
                        <blockquote>
                            {{ request.comment }}
                        </blockquote>
                    </div>
                </div>
            {% endfor %}
        </div>
        
        <nav aria-label="Page navigation">
            <ul class="pagination">
                {% set previousPage = page - 1 %}
                {% set nextPage = page + 1 %}
                {% if page == 1 %}{% set previousPage = page %}{% endif %}
                {% if page == pagesCount %}{% set nextPage = page %}{% endif %}
                <li>
                    <a href="{{ path(path, {'page': previousPage}) }}">
                        Назад
                    </a>
                </li>
                {% for number in 1..pagesCount %}
                    <li {% if number == page %}class="active"{% endif %}>
                        <a href="{{ path(path, {'page': number}) }}">
                            {{ number }}
                        </a>
                    </li>
                {% endfor %}
                <li>
                    <a href="{{ path(path, {'page': nextPage}) }}">
                        Вперед
                    </a>
                </li>
            </ul>
        </nav>
    {% endif %}
{% endblock %}
